// Generated by CoffeeScript 1.3.3
(function() {

  window.LocalStorage = (function() {

    function LocalStorage() {}

    LocalStorage.nextIdFor = function(name) {
      return this.all(name).length + 1;
    };

    LocalStorage.all = function(name) {
      if (!localStorage.getItem(name)) {
        localStorage.setItem(name, JSON.stringify([]));
      }
      return JSON.parse(localStorage.getItem(name));
    };

    LocalStorage.get = function(name, id) {
      return _.findWhere(this.all(name), {
        id: id
      });
    };

    LocalStorage.set = function(name, obj) {
      var all, ids;
      obj.id || (obj.id = this.nextIdFor(name));
      obj.id = parseInt(obj.id);
      all = this.all(name);
      ids = _.pluck(all, 'id');
      if (ids.indexOf(obj.id) > -1) {
        all.splice(ids.indexOf(obj.id), 1);
      }
      all.push(obj);
      return localStorage.setItem(name, JSON.stringify(all));
    };

    LocalStorage.remove = function(name, obj) {
      var all, ids;
      all = this.all(name);
      ids = _.pluck(all, 'id');
      if (ids.indexOf(obj.id) > -1) {
        all.splice(ids.indexOf(obj.id), 1);
      }
      return localStorage.setItem(name, JSON.stringify(all));
    };

    LocalStorage.clear = function(name) {
      localStorage.removeItem(name);
      return this.all(name);
    };

    return LocalStorage;

  })();

}).call(this);
